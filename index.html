<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galactic Command Dashboard</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>

<!-- Dashboard -->
<div class="dashboard-container hidden" id="dashboard">
  <header>
    <img src="assets/logo.svg" alt="Galactic Logo" class="logo" />
    <h2>Welcome, Commander <span id="commander-name"></span></h2>
    <button id="logout-button">Logout</button>
    <button onclick="downloadCrewLog()">Download Mission Log</button>
  </header>

  <!-- Control Panel - Netflix style tabs -->
  <nav class="control-nav">
    <button class="tab" data-tab="overview">Mission Overview</button>
    <button class="tab" data-tab="intel">Behavioral Intel</button>
    <button class="tab" data-tab="profiles">Crew Profiles</button>
    <button class="tab" data-tab="settings">System Settings</button>
    <button class="tab" data-tab="space-weather">Space Weather</button>
    <audio id="beep-sound" src="assets/click-beep.mp3" preload="auto"></audio>
    <audio id="access-sound" src="assets/access-granted.mp3" preload="auto"></audio>
  </nav>

  <!-- Sensor Alerts Section -->
  <div id="sensor-alerts">
    <h4>Sensor Readings:</h4>
    <div id="sensor-status"></div>
  </div>

  <!-- Main Panels -->
  <main>
    <section id="overview" class="panel active">
      <h3>Mission Status</h3>
      <p>Systems nominal. Galaxy scanning in progress...</p>
    </section>
    
    <section id="profiles" class="panel">
      <h3>Crew Member Profiles</h3>
      <div id="profile-cards" class="profile-grid"></div>
    </section>

    <section id="intel" class="panel">
      <h3>Behavioral Intel</h3>
      <p>Tracking personality traits and decision analysis via AI Core</p>
      <div id="ai-analysis">
        <h4>AI Personality Matrix</h4>
        <div class="trait-matrix" id="trait-matrix"></div>
      </div>
      <div class="intel-form">
        <input type="text" id="intel-name" placeholder="Crew Name" />
        <button onclick="analyzePersonality()">Analyze</button>
      </div>
    </section>

    <section id="settings" class="panel">
      <h3>System Settings</h3>
      <p>API Integration Coming Soon...</p>
    </section>
    
    <section id="space-weather" class="panel">
      <h3>Space Weather & Star Map</h3>
      <div class="weather-info">
        <p><strong>Solar Flare Activity:</strong> <span id="solar-flare">Loading...</span></p>
        <p><strong>Geomagnetic Index:</strong> <span id="geomagnetic">Loading...</span></p>
      </div>
      <canvas id="star-map" width="600" height="400"></canvas>
    </section>
  </main>
</div>

<!-- Visualizer -->
<canvas id="visualizer"></canvas>

<script>
// Initialize the dashboard
function initializeDashboard() {
  const commanderName = "Commander X";  // This should come from a real authentication system
  document.getElementById('commander-name').innerText = commanderName;
  document.getElementById('dashboard').classList.remove('hidden');
}

// Handle Tab Navigation
const tabs = document.querySelectorAll('.tab');
tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    const activeTab = tab.getAttribute('data-tab');
    document.querySelectorAll('.panel').forEach(panel => {
      panel.classList.remove('active');
      if (panel.id === activeTab) {
        panel.classList.add('active');
      }
    });
    playSound('beep-sound');
  });
});

// Handle Log Out
document.getElementById('logout-button').addEventListener('click', () => {
  alert('Logging out...');
  // Add real logout logic here
});

// Handle Crew Log Download
function downloadCrewLog() {
  const log = 'Mission Log...';  // Replace with real data
  const blob = new Blob([log], { type: 'text/plain' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'mission-log.txt';
  link.click();
}

// Handle AI Personality Analysis
function analyzePersonality() {
  const crewName = document.getElementById('intel-name').value;
  if (crewName) {
    // Simulate AI Personality Matrix for now
    const traits = ['Curiosity', 'Risk-Taking', 'Leadership', 'Stress Resistance'];
    const traitMatrix = document.getElementById('trait-matrix');
    traitMatrix.innerHTML = traits.map(trait => `<div class="trait">${trait}</div>`).join('');
    playSound('access-sound');
  }
}

// Display Sensor Data
function updateSensorData() {
  const sensorData = "Sensor systems online.";  // Simulated data
  document.getElementById('sensor-status').innerText = sensorData;
}

// Display Space Weather
function updateSpaceWeather() {
  // Simulate space weather data
  document.getElementById('solar-flare').innerText = "High";
  document.getElementById('geomagnetic').innerText = "Storm Level 3";
  
  // Star Map (simple placeholder, can be enhanced)
  const canvas = document.getElementById('star-map');
  const ctx = canvas.getContext('2d');
  ctx.fillStyle = 'white';
  ctx.fillRect(0, 0, canvas.width, canvas.height);  // Just a placeholder
}

// Helper function to play sound
function playSound(id) {
  const sound = document.getElementById(id);
  sound.play();
}

// Initialize visualizer (optional)
function initializeVisualizer() {
  const canvas = document.getElementById('visualizer');
  const ctx = canvas.getContext('2d');
  ctx.fillStyle = 'green';
  ctx.fillRect(0, 0, canvas.width, canvas.height);  // Placeholder for visualizer
}

// Call the initialization functions
initializeDashboard();
updateSensorData();
updateSpaceWeather();
initializeVisualizer();
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

</body>
</html>
